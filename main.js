/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => OrdenarArchivosPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  metricas: []
};
var OrdenarArchivosPlugin = class extends import_obsidian.Plugin {
  async onload() {
    await this.loadSettings();
    this.app.workspace.onLayoutReady(() => {
      var _a;
      this.dv = (_a = this.app.plugins.plugins["dataview"]) == null ? void 0 : _a.api;
    });
    for (let metrica of this.settings.metricas) {
      this.agregarMetrica(metrica);
    }
    this.addSettingTab(new SampleSettingTab(this.app, this));
    this.registerInterval(window.setInterval(() => console.log("setInterval"), 5 * 60 * 1e3));
  }
  onunload() {
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  agregarMetrica(metrica) {
    this.addCommand({
      id: `open-reordenar-${this.tenerMetricaId(metrica)}`,
      name: `Reordenar ${metrica}`,
      callback: async () => {
        new ReordenarModal(this.app, this.dv, metrica).open();
      }
    });
  }
  eliminarMetrica(metrica) {
    this.removeCommand(`open-reordenar-${this.tenerMetricaId(metrica)}`);
  }
  tenerMetricaId(metrica) {
    metrica = metrica.trim();
    let resultado = "";
    for (let i = 0; i < metrica.length; i++) {
      resultado += metrica[i] == " " ? "-" : metrica.charAt(i);
    }
    return resultado;
  }
};
var ReordenarModal = class extends import_obsidian.Modal {
  constructor(app, dv, metrica) {
    super(app);
    this.metrica = metrica;
    this.component = new import_obsidian.Component();
    this.archivos = dv.pages().filter((archivo) => archivo[this.metrica]).sort((archivo) => archivo[this.metrica]).map((archivo) => ({
      path: archivo.file.path,
      name: archivo.file.name,
      metrica: archivo[metrica]
    }));
    this.ultima = [];
  }
  async onOpen() {
    const { contentEl } = this;
    this.component.load();
    this.setTitle(`Ahora vamos a reordenar ${this.metrica}`);
    this.modalEl.addClass("ordenar-ventana");
    let [indiceUno, indiceDos] = this.conseguirArchivos();
    let [archivoUno, archivoDos] = [indiceUno, indiceDos].map((indice) => this.archivos[indice]);
    let tArchivoUno = this.app.vault.getAbstractFileByPath(archivoUno.path);
    let tArchivoDos = this.app.vault.getAbstractFileByPath(archivoDos.path);
    let [contenidoUno, contenidoDos] = (await Promise.all([
      this.app.vault.read(tArchivoUno),
      this.app.vault.read(tArchivoDos)
    ])).map((contenido) => this.sacarFrontmatter(contenido));
    await this.waitForDataview();
    let separacion = contentEl.createDiv();
    separacion.addClass("ordenar-separacion");
    let divIzquierda = new import_obsidian.ButtonComponent(separacion).setClass("ordenar-archivo").onClick(async () => {
      let metricaMejor = archivoUno.metrica;
      let metricaPeor = archivoDos.metrica;
      if (parseInt(metricaMejor, 10) > parseInt(metricaPeor, 10)) {
        this.archivos[indiceUno]["metrica"] = metricaPeor;
        this.archivos[indiceDos]["metrica"] = metricaMejor;
      }
      await this.onClose();
      this.onOpen();
    }).buttonEl;
    let tareaIzquierda = import_obsidian.MarkdownRenderer.render(this.app, `# ${archivoUno.name}
---
${contenidoUno}`, divIzquierda.createDiv({ cls: "ordenar-archivo-contenido" }), "", this.component);
    let divDerecha = new import_obsidian.ButtonComponent(separacion).setClass("ordenar-archivo").onClick(async () => {
      let metricaMejor = archivoDos.metrica;
      let metricaPeor = archivoUno.metrica;
      if (parseInt(metricaMejor, 10) > parseInt(metricaPeor, 10)) {
        this.archivos[indiceDos]["metrica"] = metricaPeor;
        this.archivos[indiceUno]["metrica"] = metricaMejor;
      }
      await this.onClose();
      this.onOpen();
    }).buttonEl;
    let tareaDerecha = import_obsidian.MarkdownRenderer.render(this.app, `# ${archivoDos.name}
---
${contenidoDos}`, divDerecha.createDiv({ cls: "ordenar-archivo-contenido" }), "", this.component);
    await Promise.all([tareaIzquierda, tareaDerecha]);
  }
  async waitForDataview() {
    return new Promise((resolve) => {
      if (this.app.plugins.plugins.dataview) {
        resolve(this.app.plugins.plugins.dataview);
      } else {
        this.app.workspace.on("dataview:api-ready", () => {
          resolve(this.app.plugins.plugins.dataview);
        });
      }
    });
  }
  async onClose() {
    const { contentEl } = this;
    contentEl.empty();
    this.component.unload();
    if (!this.ultima)
      return;
    let tareas = this.ultima.map((indice) => this.archivos[indice]).map(({ path, name, metrica }) => {
      let tArchivo = this.app.vault.getAbstractFileByPath(path);
      return this.app.fileManager.processFrontMatter(tArchivo, (frontmatter) => {
        frontmatter[this.metrica] = metrica;
      });
    });
    await Promise.all(tareas);
  }
  sacarFrontmatter(contenido) {
    if (contenido.slice(0, 3) != "---")
      return contenido;
    contenido = contenido.slice(3);
    let indice = contenido.indexOf("---");
    indice += contenido.slice(indice).indexOf("\n") + 1;
    return contenido.slice(indice);
  }
  conseguirArchivos() {
    let indicePrincipal, indiceSecundario;
    do {
      indicePrincipal = Math.floor(Math.random() * this.archivos.length);
      indiceSecundario = indicePrincipal == 0 ? 1 : indicePrincipal - 1;
    } while (this.ultima.length > 0 && (this.ultima[0] == indicePrincipal && this.ultima[1] == indiceSecundario || this.ultima[1] == indicePrincipal && this.ultima[0] == indiceSecundario));
    this.ultima[0] = indicePrincipal;
    this.ultima[1] = indiceSecundario;
    return this.archivos[indicePrincipal].metrica < this.archivos[indiceSecundario].metrica ? [indicePrincipal, indiceSecundario] : [indiceSecundario, indicePrincipal];
  }
};
var SampleSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h1", { text: "Configuraci\xF3n" });
    if (!this.plugin.dv) {
      containerEl.createEl("span", { text: "No se tiene instalado Dataview" });
      return;
    }
    let posiblesMetricas = this.obtenerMetricas();
    if (posiblesMetricas.length == 0) {
      containerEl.createEl("span", { text: "No hay posibles metricas para elegir" });
      return;
    }
    if (this.plugin.settings.metricas.length > 0) {
      for (let [indice, metrica] of this.plugin.settings.metricas.entries()) {
        new import_obsidian.Setting(containerEl).setName(`Setting #${indice + 1}`).setDesc("It's a secret").addDropdown((dropdown) => {
          for (let otrasMetrica of posiblesMetricas) {
            if (otrasMetrica != metrica && this.plugin.settings.metricas.indexOf(otrasMetrica) >= 0)
              continue;
            dropdown = dropdown.addOption(otrasMetrica, otrasMetrica);
          }
          dropdown = dropdown.onChange(async (value) => {
            if (metrica)
              this.plugin.eliminarMetrica(metrica);
            this.plugin.settings.metricas[indice] = value;
            this.plugin.agregarMetrica(value);
            await this.plugin.saveSettings();
          }).setValue(metrica);
          return dropdown;
        });
      }
    }
    let botones = containerEl.createDiv();
    botones.addClass("ordenar-botones");
    if (this.plugin.settings.metricas.length > 0) {
      new import_obsidian.ButtonComponent(botones).setClass("ordenar-boton").setButtonText("Eliminar m\xE9trica").setTooltip("Apretar").onClick(async () => {
        new import_obsidian.Notice("Eliminando");
        let metrica = this.plugin.settings.metricas.pop();
        if (metrica && metrica.trim() != "") {
          this.plugin.eliminarMetrica(metrica);
        }
        await this.plugin.saveSettings();
        this.display();
      });
    }
    if (posiblesMetricas.length > this.plugin.settings.metricas.length) {
      new import_obsidian.ButtonComponent(botones).setClass("ordenar-boton").setButtonText("Agregar m\xE9trica").setTooltip("Apretar").onClick(async () => {
        new import_obsidian.Notice("Agregando");
        let metricaNoUsada = posiblesMetricas.find((metrica) => this.plugin.settings.metricas.indexOf(metrica) < 0);
        this.plugin.settings.metricas.push(metricaNoUsada ? metricaNoUsada : "");
        this.plugin.agregarMetrica(metricaNoUsada ? metricaNoUsada : "");
        await this.plugin.saveSettings();
        this.display();
      });
    }
  }
  obtenerMetricas() {
    var _a;
    return (_a = this.plugin.dv) == null ? void 0 : _a.pages().flatMap((archivo) => Object.entries(archivo.file.frontmatter).map(([key, value]) => key)).groupBy((key) => key).filter(({ key, rows }) => rows.length > 2).map(({ key, rows }) => key).values;
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQXBwLCBNb2RhbCwgTm90aWNlLCBQbHVnaW4sIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcsIERyb3Bkb3duQ29tcG9uZW50LCBCdXR0b25Db21wb25lbnQsIE1hcmtkb3duUmVuZGVyZXIsIENvbXBvbmVudCB9IGZyb20gJ29ic2lkaWFuJztcblxuaW50ZXJmYWNlIE9yZGVuYXJBcmNoaXZvc1BsdWdpblNldHRpbmdzIHtcblx0bWV0cmljYXM6IHN0cmluZ1tdO1xufVxuXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBPcmRlbmFyQXJjaGl2b3NQbHVnaW5TZXR0aW5ncyA9IHtcblx0bWV0cmljYXM6IFtdXG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE9yZGVuYXJBcmNoaXZvc1BsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG5cdHNldHRpbmdzOiBPcmRlbmFyQXJjaGl2b3NQbHVnaW5TZXR0aW5ncztcblx0ZHY6IHVuZGVmaW5lZCB8IFBsdWdpbjtcblxuXHRhc3luYyBvbmxvYWQoKSB7XG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblxuXHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vbkxheW91dFJlYWR5KCgpID0+IHtcblx0XHRcdHRoaXMuZHYgPSB0aGlzLmFwcC5wbHVnaW5zLnBsdWdpbnNbXCJkYXRhdmlld1wiXT8uYXBpO1xuXHRcdH0pXG5cblx0XHQvLyBUaGlzIGFkZHMgYSBzaW1wbGUgY29tbWFuZCB0aGF0IGNhbiBiZSB0cmlnZ2VyZWQgYW55d2hlcmVcblx0XHRmb3IgKGxldCBtZXRyaWNhIG9mIHRoaXMuc2V0dGluZ3MubWV0cmljYXMpIHtcblx0XHRcdHRoaXMuYWdyZWdhck1ldHJpY2EobWV0cmljYSk7XG5cdFx0fVxuXG5cdFx0Ly8gVGhpcyBhZGRzIGEgc2V0dGluZ3MgdGFiIHNvIHRoZSB1c2VyIGNhbiBjb25maWd1cmUgdmFyaW91cyBhc3BlY3RzIG9mIHRoZSBwbHVnaW5cblx0XHR0aGlzLmFkZFNldHRpbmdUYWIobmV3IFNhbXBsZVNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcblxuXHRcdC8vIElmIHRoZSBwbHVnaW4gaG9va3MgdXAgYW55IGdsb2JhbCBET00gZXZlbnRzIChvbiBwYXJ0cyBvZiB0aGUgYXBwIHRoYXQgZG9lc24ndCBiZWxvbmcgdG8gdGhpcyBwbHVnaW4pXG5cdFx0Ly8gVXNpbmcgdGhpcyBmdW5jdGlvbiB3aWxsIGF1dG9tYXRpY2FsbHkgcmVtb3ZlIHRoZSBldmVudCBsaXN0ZW5lciB3aGVuIHRoaXMgcGx1Z2luIGlzIGRpc2FibGVkLlxuXHRcdC8vIHRoaXMucmVnaXN0ZXJEb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJywgKGV2dDogTW91c2VFdmVudCkgPT4ge1xuXHRcdC8vIFx0Y29uc29sZS5sb2coJ2NsaWNrJywgZXZ0KTtcblx0XHQvLyB9KTtcblxuXHRcdC8vIFdoZW4gcmVnaXN0ZXJpbmcgaW50ZXJ2YWxzLCB0aGlzIGZ1bmN0aW9uIHdpbGwgYXV0b21hdGljYWxseSBjbGVhciB0aGUgaW50ZXJ2YWwgd2hlbiB0aGUgcGx1Z2luIGlzIGRpc2FibGVkLlxuXHRcdHRoaXMucmVnaXN0ZXJJbnRlcnZhbCh3aW5kb3cuc2V0SW50ZXJ2YWwoKCkgPT4gY29uc29sZS5sb2coJ3NldEludGVydmFsJyksIDUgKiA2MCAqIDEwMDApKTtcblx0fVxuXG5cdG9udW5sb2FkKCkge1xuXG5cdH1cblxuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XG5cdH1cblxuXHRhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcblx0fVxuXG5cdGFncmVnYXJNZXRyaWNhKG1ldHJpY2E6IHN0cmluZyk6IHZvaWQge1xuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogYG9wZW4tcmVvcmRlbmFyLSR7dGhpcy50ZW5lck1ldHJpY2FJZChtZXRyaWNhKX1gLFxuXHRcdFx0bmFtZTogYFJlb3JkZW5hciAke21ldHJpY2F9YCxcblx0XHRcdGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdG5ldyBSZW9yZGVuYXJNb2RhbCh0aGlzLmFwcCwgdGhpcy5kdiwgbWV0cmljYSkub3BlbigpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0ZWxpbWluYXJNZXRyaWNhKG1ldHJpY2E6IHN0cmluZyk6IHZvaWQge1xuXHRcdHRoaXMucmVtb3ZlQ29tbWFuZChgb3Blbi1yZW9yZGVuYXItJHt0aGlzLnRlbmVyTWV0cmljYUlkKG1ldHJpY2EpfWApO1xuXHR9XG5cblx0dGVuZXJNZXRyaWNhSWQobWV0cmljYTogc3RyaW5nKTogc3RyaW5nIHtcblx0XHRtZXRyaWNhID0gbWV0cmljYS50cmltKCk7XG5cdFx0bGV0IHJlc3VsdGFkbyA9IFwiXCI7XG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBtZXRyaWNhLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRyZXN1bHRhZG8gKz0gKG1ldHJpY2FbaV0gPT0gXCIgXCIpID8gXCItXCIgOiBtZXRyaWNhLmNoYXJBdChpKTtcblx0XHR9XG5cdFx0cmV0dXJuIHJlc3VsdGFkbztcblx0fVxufVxuXG5cbmNsYXNzIFJlb3JkZW5hck1vZGFsIGV4dGVuZHMgTW9kYWwge1xuXHRtZXRyaWNhOiBzdHJpbmc7XG5cdGNvbXBvbmVudDogQ29tcG9uZW50O1xuXHRhcmNoaXZvczoge31bXTtcblx0dWx0aW1hOiBudW1iZXJbXTtcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgZHY6IFBsdWdpbiwgbWV0cmljYTogc3RyaW5nKSB7XG5cdFx0c3VwZXIoYXBwKTtcblx0XHR0aGlzLm1ldHJpY2EgPSBtZXRyaWNhO1xuXHRcdHRoaXMuY29tcG9uZW50ID0gbmV3IENvbXBvbmVudCgpO1xuXHRcdHRoaXMuYXJjaGl2b3MgPSBkdi5wYWdlcygpXG5cdFx0XHQuZmlsdGVyKGFyY2hpdm8gPT4gYXJjaGl2b1t0aGlzLm1ldHJpY2FdKVxuXHRcdFx0LnNvcnQoYXJjaGl2byA9PiBhcmNoaXZvW3RoaXMubWV0cmljYV0pXG5cdFx0XHQubWFwKGFyY2hpdm8gPT4gKHsgXG5cdFx0XHRcdHBhdGg6IGFyY2hpdm8uZmlsZS5wYXRoLCBcblx0XHRcdFx0bmFtZTogYXJjaGl2by5maWxlLm5hbWUsIFxuXHRcdFx0XHRtZXRyaWNhOiBhcmNoaXZvW21ldHJpY2FdIFxuXHRcdFx0fSkpO1xuXHRcdHRoaXMudWx0aW1hID0gW107XG5cdH1cblxuXHRhc3luYyBvbk9wZW4oKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Y29uc3Qge2NvbnRlbnRFbH0gPSB0aGlzO1xuXHRcdHRoaXMuY29tcG9uZW50LmxvYWQoKTtcblxuXHRcdHRoaXMuc2V0VGl0bGUoYEFob3JhIHZhbW9zIGEgcmVvcmRlbmFyICR7dGhpcy5tZXRyaWNhfWApXG5cdFx0dGhpcy5tb2RhbEVsLmFkZENsYXNzKFwib3JkZW5hci12ZW50YW5hXCIpO1xuXG5cdFx0bGV0IFsgaW5kaWNlVW5vLCBpbmRpY2VEb3MgXSA9IHRoaXMuY29uc2VndWlyQXJjaGl2b3MoKTtcblx0XHRsZXQgWyBhcmNoaXZvVW5vLCBhcmNoaXZvRG9zIF0gPSBbIGluZGljZVVubywgaW5kaWNlRG9zIF0ubWFwKGluZGljZSA9PiB0aGlzLmFyY2hpdm9zW2luZGljZV0pO1xuXHRcdGxldCB0QXJjaGl2b1VubyA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChhcmNoaXZvVW5vLnBhdGgpO1xuXHRcdGxldCB0QXJjaGl2b0RvcyA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChhcmNoaXZvRG9zLnBhdGgpO1xuXG5cdFx0bGV0IFsgY29udGVuaWRvVW5vLCBjb250ZW5pZG9Eb3MgXSA9IChhd2FpdCBQcm9taXNlLmFsbChbXG5cdFx0XHR0aGlzLmFwcC52YXVsdC5yZWFkKHRBcmNoaXZvVW5vKSxcblx0XHRcdHRoaXMuYXBwLnZhdWx0LnJlYWQodEFyY2hpdm9Eb3MpXG5cdFx0XSkpLm1hcChjb250ZW5pZG8gPT4gdGhpcy5zYWNhckZyb250bWF0dGVyKGNvbnRlbmlkbykpO1xuXHRcdGF3YWl0IHRoaXMud2FpdEZvckRhdGF2aWV3KCk7XG5cblx0XHRsZXQgc2VwYXJhY2lvbiA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoKTtcblx0XHRzZXBhcmFjaW9uLmFkZENsYXNzKFwib3JkZW5hci1zZXBhcmFjaW9uXCIpO1xuXHRcdFxuXG5cdFx0bGV0IGRpdkl6cXVpZXJkYSA9IG5ldyBCdXR0b25Db21wb25lbnQoc2VwYXJhY2lvbilcblx0XHRcdC5zZXRDbGFzcyhcIm9yZGVuYXItYXJjaGl2b1wiKVxuXHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRsZXQgbWV0cmljYU1lam9yID0gYXJjaGl2b1Vuby5tZXRyaWNhO1xuICAgICAgICAgICAgXHRsZXQgbWV0cmljYVBlb3IgPSBhcmNoaXZvRG9zLm1ldHJpY2E7XG5cblx0XHRcdFx0aWYgKCBwYXJzZUludChtZXRyaWNhTWVqb3IsIDEwKSA+IHBhcnNlSW50KG1ldHJpY2FQZW9yLCAxMCkgKSB7XG5cdFx0XHRcdFx0dGhpcy5hcmNoaXZvc1tpbmRpY2VVbm9dW1wibWV0cmljYVwiXSA9IG1ldHJpY2FQZW9yO1xuXHRcdFx0XHRcdHRoaXMuYXJjaGl2b3NbaW5kaWNlRG9zXVtcIm1ldHJpY2FcIl0gPSBtZXRyaWNhTWVqb3I7XG5cdFx0XHRcdH1cblx0XHRcdFx0YXdhaXQgdGhpcy5vbkNsb3NlKCk7IFxuXHRcdFx0XHR0aGlzLm9uT3BlbigpO1xuXHRcdFx0fSlcblx0XHRcdC5idXR0b25FbDtcblxuXHRcdGxldCB0YXJlYUl6cXVpZXJkYSA9IE1hcmtkb3duUmVuZGVyZXJcblx0XHRcdC5yZW5kZXIodGhpcy5hcHAsIGAjICR7YXJjaGl2b1Vuby5uYW1lfVxcbi0tLVxcbiR7Y29udGVuaWRvVW5vfWAsIGRpdkl6cXVpZXJkYS5jcmVhdGVEaXYoeyBjbHM6IFwib3JkZW5hci1hcmNoaXZvLWNvbnRlbmlkb1wiIH0pLCBcIlwiLCB0aGlzLmNvbXBvbmVudCk7XG5cblx0XHRsZXQgZGl2RGVyZWNoYSA9IG5ldyBCdXR0b25Db21wb25lbnQoc2VwYXJhY2lvbilcblx0XHRcdC5zZXRDbGFzcyhcIm9yZGVuYXItYXJjaGl2b1wiKVxuXHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRsZXQgbWV0cmljYU1lam9yID0gYXJjaGl2b0Rvcy5tZXRyaWNhO1xuICAgICAgICAgICAgXHRsZXQgbWV0cmljYVBlb3IgPSBhcmNoaXZvVW5vLm1ldHJpY2E7XG5cblx0XHRcdFx0aWYgKCBwYXJzZUludChtZXRyaWNhTWVqb3IsIDEwKSA+IHBhcnNlSW50KG1ldHJpY2FQZW9yLCAxMCkgKSB7XG5cdFx0XHRcdFx0dGhpcy5hcmNoaXZvc1tpbmRpY2VEb3NdW1wibWV0cmljYVwiXSA9IG1ldHJpY2FQZW9yO1xuXHRcdFx0XHRcdHRoaXMuYXJjaGl2b3NbaW5kaWNlVW5vXVtcIm1ldHJpY2FcIl0gPSBtZXRyaWNhTWVqb3I7XG5cdFx0XHRcdH1cblx0XHRcdFx0YXdhaXQgdGhpcy5vbkNsb3NlKCk7IFxuXHRcdFx0XHR0aGlzLm9uT3BlbigpO1xuXHRcdFx0fSlcblx0XHRcdC5idXR0b25FbDtcblxuXHRcdGxldCB0YXJlYURlcmVjaGEgPSBNYXJrZG93blJlbmRlcmVyXG5cdFx0XHQucmVuZGVyKHRoaXMuYXBwLCBgIyAke2FyY2hpdm9Eb3MubmFtZX1cXG4tLS1cXG4ke2NvbnRlbmlkb0Rvc31gLCBkaXZEZXJlY2hhLmNyZWF0ZURpdih7IGNsczogXCJvcmRlbmFyLWFyY2hpdm8tY29udGVuaWRvXCIgfSksIFwiXCIsIHRoaXMuY29tcG9uZW50KTtcblxuXHRcdGF3YWl0IFByb21pc2UuYWxsKFsgdGFyZWFJenF1aWVyZGEsIHRhcmVhRGVyZWNoYSBdKTtcblx0fVxuXHRhc3luYyB3YWl0Rm9yRGF0YXZpZXcoKSB7XG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG5cdFx0XHRpZiAodGhpcy5hcHAucGx1Z2lucy5wbHVnaW5zLmRhdGF2aWV3KSB7XG5cdFx0XHRcdHJlc29sdmUodGhpcy5hcHAucGx1Z2lucy5wbHVnaW5zLmRhdGF2aWV3KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vbihcImRhdGF2aWV3OmFwaS1yZWFkeVwiLCAoKSA9PiB7XG5cdFx0XHRcdFx0cmVzb2x2ZSh0aGlzLmFwcC5wbHVnaW5zLnBsdWdpbnMuZGF0YXZpZXcpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdGFzeW5jIG9uQ2xvc2UoKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Y29uc3Qge2NvbnRlbnRFbH0gPSB0aGlzO1xuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xuXG5cdFx0dGhpcy5jb21wb25lbnQudW5sb2FkKCk7XG5cblx0XHRpZiAoIXRoaXMudWx0aW1hKSByZXR1cm47XG5cblx0XHRsZXQgdGFyZWFzID0gdGhpcy51bHRpbWEubWFwKGluZGljZSA9PiB0aGlzLmFyY2hpdm9zW2luZGljZV0pXG5cdFx0XHQubWFwKCh7IHBhdGgsIG5hbWUsIG1ldHJpY2EgfSkgPT4ge1xuXHRcdFx0XHRsZXQgdEFyY2hpdm8gPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocGF0aCk7XG5cblx0XHRcdFx0cmV0dXJuIHRoaXMuYXBwLmZpbGVNYW5hZ2VyLnByb2Nlc3NGcm9udE1hdHRlcih0QXJjaGl2bywgKGZyb250bWF0dGVyKSA9PiB7XG5cdFx0XHRcdFx0ZnJvbnRtYXR0ZXJbdGhpcy5tZXRyaWNhXSA9IG1ldHJpY2E7XG5cdFx0XHRcdH0pXG5cdFx0XHR9KTtcblxuXHRcdGF3YWl0IFByb21pc2UuYWxsKHRhcmVhcyk7XG5cdH1cblxuXHRzYWNhckZyb250bWF0dGVyKGNvbnRlbmlkbzogc3RyaW5nKTogc3RyaW5nIHtcblx0XHRpZiAoY29udGVuaWRvLnNsaWNlKDAsIDMpICE9IFwiLS0tXCIpXG5cdFx0XHRyZXR1cm4gY29udGVuaWRvO1xuXHRcdGNvbnRlbmlkbyA9IGNvbnRlbmlkby5zbGljZSgzKTtcblx0XHRcblx0XHRsZXQgaW5kaWNlID0gY29udGVuaWRvLmluZGV4T2YoXCItLS1cIilcblx0XHRpbmRpY2UgKz0gY29udGVuaWRvLnNsaWNlKGluZGljZSkuaW5kZXhPZihcIlxcblwiKSArIDE7XG5cblx0XHRyZXR1cm4gY29udGVuaWRvLnNsaWNlKGluZGljZSk7XG5cdH1cblxuXHRjb25zZWd1aXJBcmNoaXZvcygpIHtcblx0XHRsZXQgaW5kaWNlUHJpbmNpcGFsLCBpbmRpY2VTZWN1bmRhcmlvO1xuXG5cdFx0ZG8ge1xuICAgICAgICBcdGluZGljZVByaW5jaXBhbCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHRoaXMuYXJjaGl2b3MubGVuZ3RoKTtcblx0XHRcdGluZGljZVNlY3VuZGFyaW8gPSBpbmRpY2VQcmluY2lwYWwgPT0gMCA/IDEgOiBpbmRpY2VQcmluY2lwYWwgLSAxO1xuXG5cdFx0fSB3aGlsZSAoXG5cdFx0XHR0aGlzLnVsdGltYS5sZW5ndGggPiAwICYmIFxuXHRcdFx0KCAodGhpcy51bHRpbWFbMF0gPT0gaW5kaWNlUHJpbmNpcGFsICYmIHRoaXMudWx0aW1hWzFdID09IGluZGljZVNlY3VuZGFyaW8pIHx8XG5cdFx0XHQgICh0aGlzLnVsdGltYVsxXSA9PSBpbmRpY2VQcmluY2lwYWwgJiYgdGhpcy51bHRpbWFbMF0gPT0gaW5kaWNlU2VjdW5kYXJpbykgKVxuXHRcdCk7XG5cdFx0XG5cdFx0dGhpcy51bHRpbWFbMF0gPSBpbmRpY2VQcmluY2lwYWw7XG5cdFx0dGhpcy51bHRpbWFbMV0gPSBpbmRpY2VTZWN1bmRhcmlvO1xuXG5cdFx0cmV0dXJuICh0aGlzLmFyY2hpdm9zW2luZGljZVByaW5jaXBhbF0ubWV0cmljYSA8IHRoaXMuYXJjaGl2b3NbaW5kaWNlU2VjdW5kYXJpb10ubWV0cmljYSkgXG5cdFx0XHQ/IFsgaW5kaWNlUHJpbmNpcGFsLCBpbmRpY2VTZWN1bmRhcmlvIF1cblx0XHRcdDogWyBpbmRpY2VTZWN1bmRhcmlvLCBpbmRpY2VQcmluY2lwYWwgXTtcbiAgICB9XG59XG5cbmNsYXNzIFNhbXBsZVNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcblx0cGx1Z2luOiBPcmRlbmFyQXJjaGl2b3NQbHVnaW47XG5cblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogT3JkZW5hckFyY2hpdm9zUGx1Z2luKSB7XG5cdFx0c3VwZXIoYXBwLCBwbHVnaW4pO1xuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xuXHR9XG5cblx0ZGlzcGxheSgpOiB2b2lkIHtcblx0XHRjb25zdCB7Y29udGFpbmVyRWx9ID0gdGhpcztcblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xuXG5cdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoXCJoMVwiLCB7IHRleHQ6IFwiQ29uZmlndXJhY2lcdTAwRjNuXCIgfSlcblxuXHRcdGlmICghdGhpcy5wbHVnaW4uZHYpIHtcblx0XHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwic3BhblwiLCB7IHRleHQ6IFwiTm8gc2UgdGllbmUgaW5zdGFsYWRvIERhdGF2aWV3XCIgfSlcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0XG5cdFx0bGV0IHBvc2libGVzTWV0cmljYXMgPSB0aGlzLm9idGVuZXJNZXRyaWNhcygpO1xuXHRcdGlmIChwb3NpYmxlc01ldHJpY2FzLmxlbmd0aCA9PSAwKSB7XG5cdFx0XHRjb250YWluZXJFbC5jcmVhdGVFbChcInNwYW5cIiwgeyB0ZXh0OiBcIk5vIGhheSBwb3NpYmxlcyBtZXRyaWNhcyBwYXJhIGVsZWdpclwiIH0pXG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLm1ldHJpY2FzLmxlbmd0aCA+IDApIHtcblx0XHRcdGZvciAobGV0IFtpbmRpY2UsIG1ldHJpY2FdIG9mIHRoaXMucGx1Z2luLnNldHRpbmdzLm1ldHJpY2FzLmVudHJpZXMoKSkge1xuXHRcdFx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdFx0XHQuc2V0TmFtZShgU2V0dGluZyAjJHtpbmRpY2UgKyAxfWApXG5cdFx0XHRcdFx0LnNldERlc2MoJ0l0XFwncyBhIHNlY3JldCcpXG5cdFx0XHRcdFx0LmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IHtcblx0XHRcdFx0XHRcdGZvciAobGV0IG90cmFzTWV0cmljYSBvZiBwb3NpYmxlc01ldHJpY2FzKSB7XG5cdFx0XHRcdFx0XHRcdGlmIChvdHJhc01ldHJpY2EgIT0gbWV0cmljYSAmJiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tZXRyaWNhcy5pbmRleE9mKG90cmFzTWV0cmljYSkgPj0gMClcblx0XHRcdFx0XHRcdFx0XHRjb250aW51ZVxuXG5cdFx0XHRcdFx0XHRcdGRyb3Bkb3duID0gZHJvcGRvd24uYWRkT3B0aW9uKG90cmFzTWV0cmljYSwgb3RyYXNNZXRyaWNhKTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0ZHJvcGRvd24gPSBkcm9wZG93bi5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0aWYgKG1ldHJpY2EpIHRoaXMucGx1Z2luLmVsaW1pbmFyTWV0cmljYShtZXRyaWNhKTtcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubWV0cmljYXNbaW5kaWNlXSA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5hZ3JlZ2FyTWV0cmljYSh2YWx1ZSk7XG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0fSkuc2V0VmFsdWUobWV0cmljYSk7XG5cblx0XHRcdFx0XHRcdHJldHVybiBkcm9wZG93bjtcblx0XHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRsZXQgYm90b25lcyA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdigpO1xuXHRcdGJvdG9uZXMuYWRkQ2xhc3MoXCJvcmRlbmFyLWJvdG9uZXNcIilcblxuXHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5tZXRyaWNhcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRuZXcgQnV0dG9uQ29tcG9uZW50KGJvdG9uZXMpXG5cdFx0XHRcdC5zZXRDbGFzcyhcIm9yZGVuYXItYm90b25cIilcblx0XHRcdFx0LnNldEJ1dHRvblRleHQoXCJFbGltaW5hciBtXHUwMEU5dHJpY2FcIilcblx0XHRcdFx0LnNldFRvb2x0aXAoXCJBcHJldGFyXCIpXG5cdFx0XHRcdC5vbkNsaWNrKGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRuZXcgTm90aWNlKFwiRWxpbWluYW5kb1wiKVxuXHRcdFx0XHRcdGxldCBtZXRyaWNhID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MubWV0cmljYXMucG9wKCk7XG5cdFx0XHRcdFx0aWYgKG1ldHJpY2EgJiYgbWV0cmljYS50cmltKCkgIT0gXCJcIikge1xuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uZWxpbWluYXJNZXRyaWNhKG1ldHJpY2EpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdHRoaXMuZGlzcGxheSgpO1xuXHRcdFx0XHR9KTtcblx0XHR9XG5cblx0XHRpZiAocG9zaWJsZXNNZXRyaWNhcy5sZW5ndGggPiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tZXRyaWNhcy5sZW5ndGgpIHtcblx0XHRcdG5ldyBCdXR0b25Db21wb25lbnQoYm90b25lcylcblx0XHRcdFx0LnNldENsYXNzKFwib3JkZW5hci1ib3RvblwiKVxuXHRcdFx0XHQuc2V0QnV0dG9uVGV4dChcIkFncmVnYXIgbVx1MDBFOXRyaWNhXCIpXG5cdFx0XHRcdC5zZXRUb29sdGlwKFwiQXByZXRhclwiKVxuXHRcdFx0XHQub25DbGljayhhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0bmV3IE5vdGljZShcIkFncmVnYW5kb1wiKVxuXHRcdFx0XHRcdGxldCBtZXRyaWNhTm9Vc2FkYSA9IHBvc2libGVzTWV0cmljYXNcblx0XHRcdFx0XHRcdC5maW5kKG1ldHJpY2EgPT4gdGhpcy5wbHVnaW4uc2V0dGluZ3MubWV0cmljYXMuaW5kZXhPZihtZXRyaWNhKSA8IDApO1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm1ldHJpY2FzLnB1c2gobWV0cmljYU5vVXNhZGEgPyBtZXRyaWNhTm9Vc2FkYSA6IFwiXCIpO1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLmFncmVnYXJNZXRyaWNhKG1ldHJpY2FOb1VzYWRhID8gbWV0cmljYU5vVXNhZGEgOiBcIlwiKTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHR0aGlzLmRpc3BsYXkoKTtcblx0XHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cblx0b2J0ZW5lck1ldHJpY2FzKCk6IHN0cmluZ1tdIHtcblx0XHRyZXR1cm4gdGhpcy5wbHVnaW4uZHY/LnBhZ2VzKClcblx0XHRcdC5mbGF0TWFwKGFyY2hpdm8gPT4gT2JqZWN0LmVudHJpZXMoYXJjaGl2by5maWxlLmZyb250bWF0dGVyKVxuXHRcdFx0Lm1hcCgoW2tleSwgdmFsdWVdKSA9PiBrZXkpKVxuXHRcdFx0Lmdyb3VwQnkoa2V5ID0+IGtleSlcblx0XHRcdC5maWx0ZXIoKHsga2V5LCByb3dzIH0pID0+IHJvd3MubGVuZ3RoID4gMilcblx0XHRcdC5tYXAoKHsga2V5LCByb3dzIH0pID0+IGtleSlcblx0XHRcdC52YWx1ZXM7XG5cdH1cbn1cbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxzQkFBdUk7QUFNdkksSUFBTSxtQkFBa0Q7QUFBQSxFQUN2RCxVQUFVLENBQUM7QUFDWjtBQUVBLElBQXFCLHdCQUFyQixj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
